<% @page_title = "ショッピングカート" %>
<h1><%= @page_title %></h1>

<% if @order.present? %>
  <table class="list">
    <thead>
      <tr>
        <th>商品名</th>
        <th>値段</th>
        <th>個数</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <% @order.each do |order| %>
        <tr>
          <td><%= order.author_items&.item_name  %></td>
          <td><%= order.orderitem&.order_price %></td>
          <td><%= order.orderitem&.orderitem_quantity %></td>
          <td>
          <%= button_to '編集', controller: :orderitems, action: :edit %> |
          <%= button_to '商品削除', controller: :order, action: :destroy_item,
            data: { confirm: "本当に削除しますか?" } %> |
          <%= button_to 'カート削除', controller: :order, action: :destroy_cart,
            data: { confirm: "本当に削除しますか?" } %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <h2><%= "合計：#{@total}円" %></h2>

<% else %>
  <p>カートの中に商品がありません。</p>
<% end %>